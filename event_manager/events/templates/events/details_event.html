{% extends "events/base.html" %}
{% block content %}
<div class="row g-5">
    <div class="col-md-8">
    <article class="blog-post">
        <h2 class="display-5 link-body-emphasis mb-1">{{event.name}}</h2>
        <p class="blog-post-meta">{{event.date}} by {{event.organizer}}</p>

        <p>{{event.description}}</p>
        <hr>

        <h2>Location</h2>
        <p>{{event.location}}</p>

        <h3>Number of Participants</h3>
        <p>{{event.max_participants}}</p>

        <h3>Venue Details</h3>
        <dl>
            <dt>name</dt>
            <dd>{{event.venue.name}}</dd>
            <dt>address</dt>
            <dd>{% if event.venue.is_virtual%} Virtual {% else %} {{event.venue.address}} {%endif%}</dd>
        </dl>
        
    </article>
</div>

<div class="col-md-4">
<div class="position-sticky" style="top: 2rem;">
<div class="p-4 mb-3 bg-body-tertiary rounded">
    <h4 class="fst-italic">Status</h4>
    <p class="mb-0">{{event.status}}</p>
</div>



<div class="p-4">
    <ol class="list-unstyled">
    <p class="my-2">Spots Left: {{tickets}}</p>
    {% if event.organizer != user%}
    <li><a class="w-100 btn my-2 btn-lg btn-primary"  href="{% url 'buy-ticket' event.id %}" {%if tickets == 0%}disabled{%endif%}>{%if ticket %} Registered{%else%}Get Spot{%endif%}</a></li>
    {% endif %}
    {% if event.organizer == user%}
    <li><a class="w-100 btn my-2 btn-lg btn-primary" href="{% url 'edit_event' event.id %}">Edit Event</a></li>
        <form
action="{% url 'delete_event' event.id %}"
method="POST"
style="display: inline"
>
{% csrf_token %}
<button
    type="submit"
    class="w-100 btn my-2 btn-lg btn-danger"
    onclick="return confirm('Are you sure you want to delete this event?');"
>
    Delete Event
</button>
</form>
    {% endif %}
    </ol>
</div>
</div>
</div>
</div>
{% endblock %}
